const circularProgressBar=document.querySelector("#circularProgressBar"),circularProgressBarNumber=document.querySelector("#circularProgressBar .progress-value"),buttonTypePomodoro=document.querySelector("#buttonTypePomodoro"),buttonTypeShortBreak=document.querySelector("#buttonTypeShortBreak"),buttonTypeLongBreak=document.querySelector("#buttonTypeLongBreak");let pomodoroTimerInSeconds=2,shortBreakTimerInSeconds=300,longBreakTimerInSeconds=900;const val=document.getElementById("pomodoro-timer"),short=document.getElementById("short-timer"),long=document.getElementById("long-timer"),num=document.querySelector(".progress-value"),TIMER_TYPE_POMODORO="POMODORO";let progressInterval,pomodoroType=TIMER_TYPE_POMODORO,timerValue=pomodoroTimerInSeconds,multiplierFactor=360/timerValue;const TIMER_TYPE_SHORT_BREAK="SHORTBREAK",TIMER_TYPE_LONG_BREAK="LONGBREAK",inputVal=document.querySelector(".input-val"),pomodoroSet=document.querySelector(".pomodoro"),shortSet=(pomodoroSet.querySelectorAll(".btns").forEach(e=>{e.querySelector(".btn-incrise").addEventListener("click",()=>{val.stepUp(),val.click()}),e.querySelector(".btn-decrise").addEventListener("click",()=>{val.stepDown(),val.click()})}),val.addEventListener("click",e=>{e=e.target.value;num.innerHTML=formatNumberInStringMinute(60*e),pomodoroTimerInSeconds=60*e,stopTimer()}),document.querySelector(".short")),longSet=(shortSet.querySelectorAll(".btns").forEach(e=>{e.querySelector(".btn-incrise").addEventListener("click",()=>{short.stepUp(),short.click()}),e.querySelector(".btn-decrise").addEventListener("click",()=>{short.stepDown(),short.click()})}),short.addEventListener("click",e=>{e=e.target.value;num.innerHTML=formatNumberInStringMinute(60*e),shortBreakTimerInSeconds=60*e,resetTimer()}),document.querySelector(".long"));function formatNumberInStringMinute(e){return Math.trunc(e/60).toString().padStart(2,"0")+":"+Math.trunc(e%60).toString().padStart(2,"0")}longSet.querySelectorAll(".btns").forEach(e=>{e.querySelector(".btn-incrise").addEventListener("click",()=>{long.stepUp(),long.click()}),e.querySelector(".btn-decrise").addEventListener("click",()=>{long.stepDown(),long.click()})}),long.addEventListener("click",e=>{e=e.target.value;num.innerHTML=formatNumberInStringMinute(60*e),longBreakTimerInSeconds=60*e,resetTimer()});const startTimer=()=>{progressInterval=setInterval(()=>{timerValue--,localStorage.setItem("progress",JSON.stringify(timerValue)),setInfoCircularProgressBar()},1e3)},stopTimer=()=>{clearInterval(progressInterval)},resetTimer=()=>{clearInterval(progressInterval),pomodoroType===TIMER_TYPE_SHORT_BREAK?timerValue=shortBreakTimerInSeconds:pomodoroType===TIMER_TYPE_LONG_BREAK?timerValue=longBreakTimerInSeconds:pomodoroType===TIMER_TYPE_POMODORO&&(timerValue=pomodoroTimerInSeconds),multiplierFactor=360/timerValue,setInfoCircularProgressBar()},audio=new Audio;function setInfoCircularProgressBar(){0===timerValue&&(stopTimer(),audio.play(),reset.classList.remove("hide"),stoped.classList.add("hide")),circularProgressBarNumber.textContent=""+formatNumberInStringMinute(timerValue),circularProgressBar.style.background=`conic-gradient( var(--color-r) ${timerValue*multiplierFactor}deg, #4f4f4f44 0deg)`}audio.src="../../assets/sounds/jutkii-smeh-odinochnyii-mujskoi-zalivnoi-rezkii.wav";const setPomomodoroType=e=>{(pomodoroType=e)===TIMER_TYPE_POMODORO&&(buttonTypeShortBreak.classList.remove("active"),buttonTypeLongBreak.classList.remove("active"),buttonTypePomodoro.classList.add("active"),localStorage.setItem("type",e),localStorage.removeItem("progress")),e===TIMER_TYPE_SHORT_BREAK&&(buttonTypePomodoro.classList.remove("active"),buttonTypeLongBreak.classList.remove("active"),buttonTypeShortBreak.classList.add("active"),localStorage.setItem("type",e),localStorage.removeItem("progress")),e===TIMER_TYPE_LONG_BREAK&&(buttonTypePomodoro.classList.remove("active"),buttonTypeShortBreak.classList.remove("active"),buttonTypeLongBreak.classList.add("active"),localStorage.setItem("type",e),localStorage.removeItem("progress")),resetTimer()},progressGet=localStorage.getItem("progress",JSON.parse(timerValue)),start=(window.addEventListener("load",()=>{setPomomodoroType(localStorage.getItem("type")),progressGet?(timerValue=progressGet,document.getElementById("stop").click(),isNaN(timerValue)?timerValue=0:document.getElementById("start").click()):resetTimer();var e=localStorage.getItem("check"),t=(e&&(document.querySelector(".active__back").classList.remove("active__back"),document.getElementById(e).classList.toggle("active__back")),localStorage.getItem("fontStyle"));e&&(document.querySelector(".active__font").classList.remove("active__font"),document.getElementById(t).classList.toggle("active__font"))}),document.getElementById("start")),stoped=document.getElementById("stop"),reset=document.getElementById("reset");function onBtnActive(e){document.querySelectorAll(".active__font").forEach(e=>{e.className=e.className.replace("active__font","")}),e.target.className+=" active__font",localStorage.setItem("fontStyle",e.target.id)}start.onclick=function(){startTimer(),start.classList.add("hide"),stoped.classList.remove("hide")},stoped.onclick=function(){stopTimer(),stoped.classList.add("hide"),start.classList.remove("hide")},reset.onclick=function(){resetTimer(),stoped.classList.remove("hide"),start.classList.add("hide"),reset.classList.add("hide"),startTimer()};const btnSFont=document.querySelector(".menu-font-btns"),kumbh=(btnSFont.addEventListener("click",onBtnActive,!1),document.getElementById("font-kumbh")),roboto=document.getElementById("font-roboto"),mono=document.getElementById("font-mono"),fontFamilys=document.querySelector(".container");let font;const preferFont=localStorage.getItem("font"),forWeightFont=(preferFont&&fontFamilys.querySelector(".card").style.setProperty("--font1",preferFont),fontFamilys.querySelectorAll(".font__btn").forEach(function(e){e.addEventListener("click",function(e){e=e.target.value;font=e,fontFamilys.querySelector(".card").style.setProperty("--font1",font),localStorage.setItem("font",font)})}),document.querySelectorAll(".font__btn"));let a,colors;const preferColor=localStorage.getItem("color"),targetColor=(preferColor&&fontFamilys.querySelector(".card").style.setProperty("--color-r",preferColor),()=>{fontFamilys.querySelectorAll(".color__btn").forEach(function(e){e.addEventListener("click",function(e){e=e.target.value;colors=e,fontFamilys.querySelector(".card").style.setProperty("--color-r",colors),localStorage.setItem("color",colors)})})});function onBtnActiveColor(e){document.querySelectorAll(".color__btn").forEach(e=>{e.className=e.className.replace("active__back","")}),e.target.className+=" active__back",localStorage.setItem("check",e.target.id)}targetColor();const btnSColor=document.querySelector(".menu-color-btns"),menu=(btnSColor.addEventListener("click",onBtnActiveColor,!1),document.querySelector(".setting-hide")),openBtn=document.querySelector(".settings__btn"),apply=(openBtn.addEventListener("click",()=>{menu.classList.remove("hide"),openBtn.disabled=!0,openBtn.classList.add("open-block")}),document.querySelector(".setting__btn-apply")),chest=(apply.addEventListener("click",()=>{menu.classList.add("hide"),openBtn.disabled=!1,openBtn.classList.remove("open-block")}),document.querySelector(".chest"));chest.addEventListener("click",()=>{menu.classList.add("hide"),openBtn.disabled=!1,openBtn.classList.remove("open-block")});